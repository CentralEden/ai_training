# 時系列データ基礎 - 時系列解析専門コース

## 学習目標
- 時系列データの特性と課題を理解する
- 時系列データの可視化・前処理手法を習得する
- 基本的な時系列統計量の計算と解釈ができる
- 定常性の概念と検定方法を理解する

## 対象案件
- **需要予測**: 小売業の売上予測、製造業の生産計画
- **金融分析**: 株価予測、リスク管理、経済指標分析
- **設備監視**: IoTセンサーデータの異常検知
- **マーケティング**: Webトラフィック分析、季節性分析

## 前提知識
- 共通基礎コース修了
- Python（pandas, numpy, matplotlib）の基本操作
- 統計学の基礎知識

## 学習時間
- 理論: 2時間
- 実習: 4時間
- 演習: 2時間

---

## 1. 時系列データの特性理解

### 1.1 時系列データとは
- **定義**: 時間の経過とともに観測される値の系列
- **特徴**: 
  - 時間的順序が重要
  - 隣接する観測値の相関（自己相関）
  - 季節性・トレンドの存在
  - 非定常性の可能性

### 1.2 時系列データの種類
```python
# 社内データ例（匿名化済み）
- 日次売上データ: 店舗別売上高
- 時間別アクセス数: Webサイトの訪問者数
- 月次生産量: 製造ラインの生産実績
- 分単位センサーデータ: 設備の温度・圧力
```

### 1.3 時系列分析の目的
- **記述的分析**: データの特徴・パターンの理解
- **予測**: 将来値の予測・計画立案
- **異常検知**: 通常パターンからの逸脱検出
- **因果関係分析**: 複数時系列間の関係分析

## 2. 時系列データ可視化

### 2.1 基本的な可視化
- **時系列プロット**: [notebooks/01_basic_visualization.ipynb](./notebooks/01_basic_visualization.ipynb)
- **季節性の確認**: [notebooks/02_seasonality_analysis.ipynb](./notebooks/02_seasonality_analysis.ipynb)
- **トレンド分析**: [notebooks/03_trend_analysis.ipynb](./notebooks/03_trend_analysis.ipynb)

### 2.2 高度な可視化
- **自己相関関数（ACF）**: データの自己相関の可視化
- **偏自己相関関数（PACF）**: 直接的な相関の可視化
- **スペクトラム分析**: 周波数成分の分析

## 3. 時系列データの前処理

### 3.1 欠損値処理
```python
# 時系列データ特有の欠損値処理
- 線形補間: 前後の値から線形的に補間
- 季節性考慮補間: 同じ季節の過去データを参考
- 移動平均補間: 周辺データの平均値で補間
```

### 3.2 外れ値処理
- **統計的検出**: 平均±3σの範囲外
- **季節性考慮**: 季節調整後の異常値検出
- **ドメイン知識**: 業務知識に基づく異常値判定

### 3.3 データ変換
- **対数変換**: 指数的成長の線形化
- **差分**: 非定常性の除去
- **季節差分**: 季節性の除去
- **Box-Cox変換**: 分散の安定化

## 4. 時系列統計量

### 4.1 基本統計量
- **平均**: 時系列全体の平均値
- **分散**: データのばらつき
- **標準化**: データの標準化・正規化

### 4.2 時系列特有の統計量
- **自己相関**: 過去の値との相関
- **偏自己相関**: 直接的な相関
- **長期記憶**: 長期的な依存関係

## 5. 定常性の概念

### 5.1 定常性とは
- **弱定常性**: 平均・分散が時間不変
- **強定常性**: 分布が時間不変
- **トレンド定常性**: トレンドを除去すると定常

### 5.2 定常性の検定
- **ADF検定**: 単位根検定
- **KPSS検定**: 定常性検定
- **Phillips-Perron検定**: 単位根検定の改良版

### 5.3 非定常性への対処
- **差分**: 1次差分・2次差分
- **季節差分**: 季節性の除去
- **トレンド除去**: 回帰によるトレンド除去

## 6. 実習課題

### 6.1 社内データ分析
**使用データ**: 匿名化された月次売上データ（3年分）
**課題**:
1. データの可視化と基本統計量の計算
2. 季節性・トレンドの特定
3. 欠損値・外れ値の処理
4. 定常性の検定と適切な変換

### 6.2 実装演習
```python
# サンプルコード構成
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from statsmodels.tsa.stattools import adfuller, kpss
from statsmodels.graphics.tsaplots import plot_acf, plot_pacf

# 1. データ読み込み・可視化
# 2. 基本統計量計算
# 3. 欠損値処理
# 4. 定常性検定
# 5. データ変換
```

## 7. 演習問題

### 問題1: 時系列の特徴分析
与えられた時系列データから以下を分析：
- [ ] トレンドの有無と方向性
- [ ] 季節性の有無と周期
- [ ] 分散の時間変化
- [ ] 自己相関の強さ

### 問題2: 前処理の実装
以下の前処理を実装：
- [ ] 欠損値の適切な補間
- [ ] 外れ値の検出と処理
- [ ] 定常性を満たすデータ変換
- [ ] 変換後の検定による確認

### 問題3: 業務データ分析
**シナリオ**: ECサイトの日次売上データ
**タスク**:
- 年末年始・ゴールデンウィークの影響分析
- 平日・休日パターンの特定
- COVID-19前後の変化点検出

## 8. 評価基準

### 理論理解 (40%)
- [ ] 時系列データの特性理解 (10%)
- [ ] 定常性の概念理解 (10%)
- [ ] 統計量の意味理解 (10%)
- [ ] 前処理手法の適用判断 (10%)

### 実装スキル (40%)
- [ ] 可視化の適切性 (10%)
- [ ] 前処理の実装 (10%)
- [ ] 統計検定の実施 (10%)
- [ ] コードの品質 (10%)

### 業務適用 (20%)
- [ ] 業務課題の理解 (10%)
- [ ] 分析結果の解釈 (10%)

## 9. 次のステップ

### 推奨学習順序
1. ✅ 時系列データ基礎 ← **現在地**
2. ⬜ 古典的時系列分析（ARIMA等）
3. ⬜ 機械学習・深層学習アプローチ
4. ⬜ 予測プロジェクト

### 実務適用チェックリスト
- [ ] 社内データの時系列分析実施
- [ ] 定常性検定の業務適用
- [ ] 前処理パイプラインの構築
- [ ] 可視化による業務報告

## 10. 参考資料

### 推奨書籍
- 「時系列解析入門」- 北川源四郎
- 「Pythonによる時系列分析」- 舟尾暢男
- 「実践時系列解析」- 柳澤明

### オンラインリソース
- [statsmodels公式ドキュメント](https://www.statsmodels.org/)
- [社内時系列分析事例集](../../resources/case_studies/time_series/)
- [時系列解析FAQ](../../resources/faq/time_series_faq.md)

---

💡 **学習のコツ**: 
- 実際の業務データで手を動かして学ぶ
- 可視化を重視し、データの特徴を理解する
- 統計的手法の背景理論も併せて学習する
- 業務への適用可能性を常に意識する 